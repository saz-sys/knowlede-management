# engineering-knowledge-sharing 要件定義

## 1. 概要
PdE内のエンジニアが収集した技術記事や実務知見を継続的に蓄積し、組織全体のスキル底上げにつなげる社内Webサービスの要件を定義する。ミニマム構成として、Next.js + Supabase（Free Tier）を基盤に採用し、Slack連携とRSS取り込みを通じて情報循環を活性化する。

## 2. ステークホルダー
- PdEエンジニア（主要利用者、投稿・閲覧・ディスカッション）
- PdEマネージャー / EM（チーム学習状況の把握と促進）
- PdEナレッジマネジメント担当（RSS管理、投稿品質のモデレーション）

## 3. 目標
- サービス開始3ヶ月以内にPdEエンジニアの月次投稿者率30%以上を達成する。
- サービス開始6ヶ月以内にSlackダイジェストからの週次訪問率70%以上を維持する。
- 1年以内に主要技術テーマごとのナレッジカードを各10件以上蓄積する。

## 4. 非目標（スコープ外）
- 社外公開やパートナー企業向けのアクセス提供。
- VPN専用アクセスや専用ハードウェア導入。
- エンジニア評価制度との直接的な連携。

## 5. 課題と洞察
- 現状の課題: 情報収集・共有が個人に閉じ、Slackで流れてしまうため蓄積されない。
- ユーザーニーズ: 信頼できる仲間のコメント付きキュレーションと集中議論の場が欲しい。
- 既存のワークアラウンド: RSSリーダーや個人Notionで管理しているが組織活用できていない。

## 6. 要求事項（EARS形式ユーザーストーリー）

### REQ-001 コメント付き投稿作成
- 種別: 機能
- ロール: PdEエンジニア
- きっかけ (When...): When エンジニアが有益な記事や知見を共有したいとき
- システム応答 (the system shall...): the system shall 記事リンク、独自コメント、タグ、引用ハイライトを添えて投稿できるエディタを提供する
- 理由 / 価値: 文脈と洞察を付与することで閲覧動機を高める
- 受け入れ基準:
  - [ ] Markdownリッチテキスト入力が可能
  - [ ] タグを最低1つ選択必須
  - [ ] 投稿保存後にSlack通知設定ダイアログを表示

### REQ-002 ディスカッションとナレッジ蓄積
- 種別: 機能
- ロール: PdEエンジニア
- きっかけ: When 投稿された知見について議論したいとき
- システム応答: the system shall スレッド型コメントと議論内容を要約できるナレッジカード化機能を提供する
- 理由 / 価値: Slackで流れがちな議論を後から参照できるようにする
- 受け入れ基準:
  - [ ] 階層コメントと@メンション、リアクションが利用できる
  - [ ] 投稿者またはモデレーターが議論を要約してカード化できる

### REQ-003 RSSおよび外部情報取り込み
- 種別: 機能
- ロール: PdEナレッジマネジメント担当
- きっかけ: When RSSや外部ソースから情報をキュレーションしたいとき
- システム応答: the system shall RSSフィード登録、定期取得、自動タグ推定と承認フローを提供する
- 理由 / 価値: RSS購読との差別化と幅広い情報の取り込み
- 受け入れ基準:
  - [ ] RSSフィードの追加・編集・停止が行える
  - [ ] 取得した記事にタグ候補と要約を自動生成
  - [ ] 承認後に投稿として公開できる

### REQ-004 Slack通知とダイジェスト配信
- 種別: 機能
- ロール: PdEエンジニア
- きっかけ: When 新規投稿やナレッジカードが公開されたとき、または週次のまとめ配信タイミング
- システム応答: the system shall Slackチャンネルへ概要付き通知と週次ダイジェストを送信する
- 理由 / 価値: Slack経由でのリマインドによりサービス訪問を促す
- 受け入れ基準:
  - [ ] 投稿保存時に通知対象チャンネルを選択可能
  - [ ] 週次ダイジェストにトップ投稿・未読数を含む
  - [ ] 通知のミュート時間帯設定ができる

### REQ-005 ナレッジ検索とタグナビゲーション
- 種別: 機能
- ロール: PdEエンジニア、PdEマネージャー
- きっかけ: When 過去の議論や特定テーマの知見を参照したいとき
- システム応答: the system shall 投稿・コメント・カードを横断検索し、タグ・投稿者・期間で絞り込めるUIを提供する
- 理由 / 価値: アーカイブの再利用と意思決定支援
- 受け入れ基準:
  - [ ] 投稿・コメント・カードを対象とした全文検索が1秒以内（p90）で返る
  - [ ] タグ人気度や関連タグを表示する

## 7. 非機能要件
- 認証: Supabase Auth + Google Workspaceドメイン制限。MFAはGoogle側ポリシーで強制。
- アクセス制御: 招待済みアカウントのみ利用可。社外ネットワークからのアクセスを許可しつつ、SSO後のトークン検証でゼロトラストを実現。
- 可用性: Free Tier前提で、主要画面の初期表示を2秒以内（p90）とし、障害時は手動復旧手順で対応する。
- セキュリティ: HTTPS/TLS必須、CSRF・XSS対策、監査ログをSupabaseに90日以上保管。
- 運用: RSS取得やSlack配信はSupabase Edge Functionsの無料スケジューラで実行、失敗時は通知。

## 8. 分析指標 / 成功指標
- 週次アクティブ読者数、月次投稿者率、コメント参加率。
- Slackダイジェストの開封率・クリック率、通知からの訪問転換率。
- タグ別投稿数、ナレッジカード作成数、RSS取り込み承認率。
- 新規利用者の初回投稿までの平均日数。

## 9. リスクと前提条件
- リスク: Supabaseの無料枠制限によりスループットが不足する可能性。
- リスク: 無料構成では監視・アラートが簡易で、障害検知が遅れる恐れ。
- 前提条件: Google WorkspaceドメインとSlack APIトークンが利用可能であること。
- 前提条件: RSSソースの著作権・利用規約を遵守するモデレーション体制が整うこと。

## 10. 未解決事項 / 次のステップ
- 非アクティブユーザー向けリマインド方法（メール等）の必要性検討。
- ナレッジカードの品質担保ポリシー策定。
- 将来的な有償プラン移行やスケールアウト要件の整理。
- ベータリリース対象チームとモニタリング体制の策定。

