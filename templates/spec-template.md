# 機能仕様書: [機能名]

**フィーチャーブランチ**: `[###-feature-name]`
**作成日**: [DATE]
**ステータス**: ドラフト
**入力**: ユーザー説明: "$ARGUMENTS"

## 実行フロー (メイン)
```
1. 入力からユーザー説明を解析
   → 空の場合: ERROR "機能説明が提供されていません"
2. 説明からキー概念を抽出
   → 識別: アクター、アクション、データ、制約
3. 不明な側面ごとに:
   → [要明確化: 具体的な質問]でマーク
4. ユーザーシナリオ & テストセクションを記入
   → 明確なユーザーフローがない場合: ERROR "ユーザーシナリオを決定できません"
5. 機能要件を生成
   → 各要件はテスト可能である必要あり
   → 曖昧な要件をマーク
6. キーエンティティを識別（データが関与する場合）
7. レビューチェックリストを実行
   → [要明確化]がある場合: WARN "仕様に不確実性があります"
   → 実装詳細が見つかった場合: ERROR "技術詳細を削除"
8. 戻り値: SUCCESS (仕様は計画準備完了)
```

---

## ⚡ クイックガイドライン
- ✅ ユーザーが何を必要とし、なぜ必要かに焦点を当てる
- ❌ 実装方法を避ける（技術スタック、API、コード構造なし）
- 👥 開発者ではなく、ビジネス関係者向けに記述

### セクション要件
- **必須セクション**: すべての機能で完了必須
- **オプションセクション**: 機能に関連する場合のみ含める
- セクションが適用されない場合は、完全に削除する（"N/A"として残さない）

### AI生成向け
ユーザープロンプトからこの仕様を作成する際：
1. **すべての曖昧さをマーク**: 仮定が必要な箇所は[要明確化: 具体的な質問]を使用
2. **推測しない**: プロンプトで指定されていない場合（例：認証方法なしの「ログインシステム」）はマーク
3. **テスターのように考える**: 曖昧な要件は「テスト可能で明確」チェックリスト項目に失敗するはず
4. **一般的な不十分な仕様領域**:
   - ユーザータイプと権限
   - データ保持/削除ポリシー
   - パフォーマンス目標とスケール
   - エラー処理の動作
   - 統合要件
   - セキュリティ/コンプライアンス要件

---

## ユーザーシナリオ & テスト *(必須)*

### 主要ユーザーストーリー
[主要ユーザージャーニーを平易な言葉で説明]

### 受け入れシナリオ
1. **前提** [初期状態], **操作** [アクション], **結果** [期待される結果]
2. **前提** [初期状態], **操作** [アクション], **結果** [期待される結果]

### エッジケース
- [境界条件]の時に何が起こるか？
- システムは[エラーシナリオ]をどう処理するか？

## 要件 *(必須)*

### 機能要件
- **FR-001**: システムは[具体的な機能、例：「ユーザーがアカウントを作成できる」]を必須とする
- **FR-002**: システムは[具体的な機能、例：「メールアドレスを検証する」]を必須とする
- **FR-003**: ユーザーは[主要な操作、例：「パスワードをリセットできる」]ことが必須
- **FR-004**: システムは[データ要件、例：「ユーザー設定を永続化する」]を必須とする
- **FR-005**: システムは[動作、例：「すべてのセキュリティイベントをログに記録する」]を必須とする

*不明確な要件のマーク例:*
- **FR-006**: システムは[要明確化: 認証方法未指定 - メール/パスワード、SSO、OAuth？]を介してユーザーを認証することを必須とする
- **FR-007**: システムは[要明確化: 保持期間未指定]の間ユーザーデータを保持することを必須とする

### キーエンティティ *(機能がデータを含む場合に含める)*
- **[エンティティ1]**: [何を表すか、実装なしのキー属性]
- **[エンティティ2]**: [何を表すか、他のエンティティとの関係]

---

## レビュー & 受け入れチェックリスト
*ゲート: main()実行中に自動チェックが実行される*

### コンテンツ品質
- [ ] 実装詳細なし（言語、フレームワーク、API）
- [ ] ユーザー価値とビジネスニーズに焦点
- [ ] 非技術系関係者向けに記述
- [ ] すべての必須セクションが完了

### 要件完全性
- [ ] [要明確化]マーカーが残っていない
- [ ] 要件がテスト可能で明確
- [ ] 成功基準が測定可能
- [ ] スコープが明確に境界づけられている
- [ ] 依存関係と仮定が識別されている

---

## 実行ステータス
*処理中にmain()によって更新される*

- [ ] ユーザー説明の解析完了
- [ ] キー概念の抽出完了
- [ ] 曖昧さのマーク完了
- [ ] ユーザーシナリオの定義完了
- [ ] 要件の生成完了
- [ ] エンティティの識別完了
- [ ] レビューチェックリストの通過完了

---
